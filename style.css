/* Reset Básico */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent; /* Remove highlight azul no toque mobile */
}

html, body {
    height: 100%;
    overflow: hidden; /* Prevent body scroll */
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    flex-direction: column;
    height: 100vh; /* Full viewport height */
    transition: background-color 0.4s ease, color 0.4s ease, background-image 0.4s ease;
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-size: cover;
    background-position: center;
    position: relative;
    background-color: var(--bg-primary); /* Mantido como variável */
    background-image: var(--theme-background-image);
    color: var(--text-primary); /* Adicionado para consistência */
}

/* Variáveis de Tema (Base Light + Novas) */
:root {
    --bg-primary: #ffffff;
    --bg-secondary: #f8f9fa;
    --bg-tertiary: #e9ecef;
    --bg-secondary-alpha: rgba(248, 249, 250, 0.98);
    --bg-tertiary-alpha: rgba(233, 236, 239, 0.96);
    --bg-sticky-alpha: rgba(248, 249, 250, 0.98); /* Mantido para tabelas */
    --bg-modal-alpha: var(--bg-primary); /* Opaco no light */
    --bg-notification: #4caf50;
    --text-notification: #ffffff;

    --text-primary: #212529;
    --text-secondary: #6c757d;
    --accent-primary: #007bff;
    --accent-secondary: #6c757d;
    --accent-success: #28a745;
    --accent-danger: #dc3545;
    --accent-warning: #ffc107;
    --border-color: #dee2e6;
    --shadow-color: rgba(0, 0, 0, 0.1);
    --input-bg: #fff;
    --input-border: #ced4da;
    --nav-height: 65px; /* Mantido */
    --fab-bottom-margin: 15px; /* Mantido */
    --theme-background-image: none; /* Mantido */
    --theme-background-opacity: 1; /* Mantido */
    --theme-background-blend-mode: normal; /* Mantido */
    --theme-background-filter: none; /* Mantido */

     /* Cores Notas/Freq (Mantido) */
     --grade-low-bg: #f8d7da; --grade-low-text: #721c24;
     --grade-medium-bg: #fff3cd; --grade-medium-text: #856404;
     --grade-high-bg: #d4edda; --grade-high-text: #155724;
     --attendance-holiday-bg: #e2e3e5; --attendance-holiday-text: #495057;

     /* Cores Mapa Sala (Mantido) */
     --map-seat-bg: var(--input-bg);
     --map-seat-border: var(--input-border);
     --map-seat-text: var(--text-secondary);
     --map-seat-occupied-bg: color-mix(in srgb, var(--accent-primary) 15%, transparent);
     --map-seat-occupied-text: var(--text-primary);
     --map-teacher-desk-bg: var(--bg-tertiary);
     --map-teacher-desk-border: var(--accent-secondary);
     --map-drag-over-bg: color-mix(in srgb, var(--accent-success) 30%, transparent);
     --map-seat-selected-border: var(--accent-warning);
     --teacher-desk-width: 80px; --teacher-desk-height: 45px; --teacher-desk-border-width: 3px;
     --seat-width: 65px; --seat-height: 45px; --seat-gap: 6px;

     /* Ferramentas (Mantido) */
     --tool-card-min-width: 130px;

     /* Calculadora (Mantido) */
    --calc-display-bg: var(--bg-tertiary-alpha);
    --calc-button-bg: var(--accent-primary);
    --calc-button-text: #ffffff;
    --calc-op-button-bg: color-mix(in srgb, var(--accent-primary) 80%, #ffffff);
    --calc-util-button-bg: var(--accent-secondary);
    --calc-danger-button-bg: var(--accent-danger);
    --calc-warn-button-bg: var(--accent-warning);
    --calc-button-hover-opacity: 0.85;
    --calc-button-active-scale: 0.96;
    --calc-mode-button-bg: var(--bg-tertiary);
    --calc-mode-button-text: var(--text-secondary);
    --calc-mode-button-active-bg: var(--accent-primary);
    --calc-mode-button-active-text: #ffffff;

     /* Touch Feedback (Mantido) */
    --active-scale: 0.96;
    --active-opacity: 0.9;

    /* --- NOVAS VARIÁVEIS do Polimento --- */
    --suspended-bg: rgba(220, 53, 69, 0.08); /* Fundo para linha de aluno suspenso */
    --rep-gold-start: #ffd700; --rep-gold-end: #fca311; /* Gradiente representante */
    --vice-silver-start: #e0e0e0; --vice-silver-end: #adb5bd; /* Gradiente vice */
    --highlight-bg: rgba(0, 123, 255, 0.1); /* Fundo para observação destacada */
     /* Cores Categoria Observação */
    --cat-anotacao-border: #6c757d; --cat-anotacao-bg: #e9ecef; --cat-anotacao-text: #343a40;
    --cat-observacao-border: #007bff; --cat-observacao-bg: #cce5ff; --cat-observacao-text: #004085;
    --cat-ocorrencia-border: #ffc107; --cat-ocorrencia-bg: #fff3cd; --cat-ocorrencia-text: #856404;
    --cat-advertencia-border: #fd7e14; --cat-advertencia-bg: #ffe8d6; --cat-advertencia-text: #8a4d0f;
    --cat-suspensao-border: #dc3545; --cat-suspensao-bg: #f8d7da; --cat-suspensao-text: #721c24;
    /* Variável para animação */
    --angle: 0deg;
}

/* --- NOVAS: Animação e Propriedade para Borda Animada --- */
@property --angle { syntax: '<angle>'; initial-value: 0deg; inherits: false; }
@keyframes rotate-border-glow { to { --angle: 360deg; } }

/* Pseudo-elemento para background pattern com opacidade (Mantido) */
body::before { content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-image: var(--theme-background-image); background-color: transparent; background-repeat: repeat; background-attachment: fixed; background-size: auto; background-position: center; opacity: var(--theme-background-opacity); mix-blend-mode: var(--theme-background-blend-mode); filter: var(--theme-background-filter); z-index: -1; pointer-events: none; transition: opacity 0.4s ease; }

/* --- TEMAS --- */
/* (Estilos de temas originais mantidos - Adicionar/Ajustar variáveis do polimento se necessário para cada tema) */
/* Exemplo: Adicionar cores de categoria para tema escuro */
body.theme-dark {
    /* ... outras variáveis dark ... */
    --suspended-bg: rgba(239, 68, 68, 0.15);
    --rep-gold-start: #facc15; --rep-gold-end: #f59e0b;
    --vice-silver-start: #9ca3af; --vice-silver-end: #6b7280;
    --highlight-bg: rgba(59, 130, 246, 0.15);
    --cat-anotacao-border: #6b7280; --cat-anotacao-bg: #4b5563; --cat-anotacao-text: #e5e7eb;
    --cat-observacao-border: #3b82f6; --cat-observacao-bg: #1e3a8a; --cat-observacao-text: #dbeafe;
    --cat-ocorrencia-border: #f59e0b; --cat-ocorrencia-bg: #78350f; --cat-ocorrencia-text: #fef3c7;
    --cat-advertencia-border: #f97316; --cat-advertencia-bg: #7c2d12; --cat-advertencia-text: #ffedd5;
    --cat-suspensao-border: #ef4444; --cat-suspensao-bg: #7f1d1d; --cat-suspensao-text: #fee2e2;
}
/* Adicionar estilos específicos de tema para outras cores, se necessário... */
/* ... (Demais temas originais) ... */

/* Estilos Gerais, Layout Principal, Seções */
/* ... (Mantidos: h1-h6, p, a, form elements, .app-header, .app-content, .app-nav, .nav-button, .section, .fab-button etc...) ... */
/* Ajuste no header para teste */
.app-header { background-color: var(--bg-primary); padding: 0.8rem 1rem; border-bottom: 1px solid var(--border-color); box-shadow: 0 1px 2px var(--shadow-color); flex-shrink: 0; z-index: 1001; }
.app-header h1 { margin: 0; font-size: 1.3rem; color: var(--accent-primary); text-align: center; }
/* Remover header original da turma */
#classes-section h2, #class-details-section h2:not(#class-details-header h2) { display: none; } /* Esconde H2 originais */

/* --- NOVO: Cabeçalho Sticky da Seção Detalhes --- */
#class-details-header {
    display: flex; align-items: center; justify-content: center; /* Ajustado para center */
    padding: 0.6rem 0.5rem;
    margin: 0 -1rem 1rem -1rem; /* Estende até as bordas */
    position: sticky; top: 0;
    background-color: rgba(255, 255, 255, 0.97); /* Branco quase opaco */
    backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); /* Efeito vidro */
    border-bottom: 1px solid var(--border-color);
    z-index: 1000;
    box-shadow: 0 1px 3px var(--shadow-color);
    transition: padding 0.2s ease-in-out, background-color 0.4s ease;
    gap: 0.5rem;
}
/* Estilos do H2 dentro do cabeçalho sticky */
#class-details-header h2 {
    margin: 0;
    font-size: 1.05rem; /* Tamanho inicial */
    font-weight: 600;
    color: var(--accent-primary);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    transition: font-size 0.2s ease-in-out;
    flex-grow: 1; /* Ocupa espaço disponível */
    text-align: center; /* Centraliza o texto */
    /* Remove padding interno do H2 original */
    padding-left: 0;
    padding-right: 0;
    display: flex; /* Para alinhar ícone e texto */
    align-items: center;
    justify-content: center; /* Centraliza conteúdo flex */
}
#class-details-header h2 .icon {
    font-size: 1.1em; /* Tamanho inicial ícone */
    margin-right: 0.4em;
    vertical-align: middle;
    transition: font-size 0.2s ease-in-out;
}
/* Botão Voltar dentro do header sticky */
#class-details-header .back-button {
    position: static; /* Remove position absolute */
    transform: none; /* Remove transform */
    flex-shrink: 0; /* Não encolhe */
    margin-right: 0.5rem; /* Espaço à direita */
}
/* Botão Ajuda dentro do header sticky */
#details-help-button {
    flex-shrink: 0; /* Não encolhe */
    margin-left: 0.5rem; /* Espaço à esquerda */
}
/* Estilos quando rolado */
#class-details-header.scrolled {
    padding: 0.3rem 0.5rem; /* Padding menor */
}
#class-details-header.scrolled h2 {
    font-size: 0.9rem; /* Fonte menor */
}
#class-details-header.scrolled h2 .icon {
    font-size: 1em; /* Ícone menor */
}
/* Adaptação de tema escuro para o header sticky */
body.theme-dark #class-details-header {
    background-color: rgba(44, 48, 52, 0.96); /* Cor escura com transparência */
    border-bottom-color: var(--border-color);
}


/* Cards com Estilo Melhorado */
.card {
    background-color: var(--bg-primary); /* Fundo branco/primário do tema */
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
    box-shadow: 0 2px 5px var(--shadow-color);
    transition: padding-bottom 0.3s ease, margin-bottom 0.3s ease, box-shadow 0.2s ease, background-color 0.4s ease; /* Inclui transição de fundo */
}
.card:hover { box-shadow: 0 4px 10px color-mix(in srgb, var(--shadow-color) 120%, black); }
.card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.5rem; padding-bottom: 0.5rem; border-bottom: 1px solid var(--border-color); flex-wrap: wrap; gap: 5px; }
.card-header h3 { margin: 0; font-size: 1.1rem; font-weight: 600; display: flex; align-items: center; gap: 0.5em; color: var(--text-primary); }
.card-header .options { display: flex; align-items: center; flex-wrap: wrap; gap: 5px; margin-left: auto; flex-shrink: 0; }
.card-content { padding-top: 0.5rem; transition: max-height 0.35s ease-out, opacity 0.3s ease-out, padding-top 0.3s ease-out, padding-bottom 0.3s ease-out, margin-top 0.3s ease-out, visibility 0.3s; max-height: 1500px; opacity: 1; overflow: hidden; visibility: visible; }
.card.collapsed { padding-top: 0.8rem; padding-bottom: 0.8rem; margin-bottom: 1rem; }
.card.collapsed .card-header { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
.card.collapsed .card-content { max-height: 0; opacity: 0; padding-top: 0; padding-bottom: 0; margin-top: 0; overflow: hidden; visibility: hidden; }
.card-toggle-button { padding: 0.3rem !important; font-size: 0.9rem !important; line-height: 1; background: transparent !important; border: none !important; color: var(--text-secondary); cursor: pointer; margin-left: auto; order: 99; /* Garante que fique por último */ }
.card-toggle-button:hover { color: var(--accent-primary); }
/* Remove max-height do container de alunos */
#student-list-container.card-content { max-height: none; }


/* --- ESTILOS LISTA DE ALUNOS (COMPLETAMENTE SUBSTITUÍDOS) --- */
#student-list-container .list-item {
    background-color: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    margin-bottom: 0.5rem;
    transition: border-color 0.2s ease, background-color 0.4s ease;
    position: relative; /* Para a borda animada */
    overflow: hidden; /* Para conter a borda animada */
}
#student-list-container .list-item:hover {
    border-color: var(--accent-primary); /* Feedback hover */
}
/* Wrapper para o conteúdo, z-index garante que fique sobre a borda animada */
#student-list-container .list-item-content-wrapper {
    padding: 0.65rem 0.9rem;
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
}
/* Linha principal com número, nome e botão expandir */
#student-list-container .list-item-main-row {
    display: flex;
    align-items: center;
    width: 100%;
}
#student-list-container .list-item .student-number {
    font-weight: 600;
    margin-right: 10px;
    min-width: 25px; /* Ajustado */
    text-align: right;
    color: var(--text-secondary);
    font-size: 0.8em;
}
#student-list-container .list-item .student-name {
    white-space: normal;
    word-break: break-word;
    flex-grow: 1;
    margin-right: 10px;
    font-weight: 500;
    color: var(--text-primary);
}
/* Botão de expandir ações */
#student-list-container .expand-actions-button {
    flex-shrink: 0;
    margin-left: auto; /* Empurra para a direita */
    padding: 0.3rem 0.6rem;
    font-size: 0.8rem;
    background-color: var(--bg-tertiary);
    color: var(--text-secondary);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s;
}
#student-list-container .expand-actions-button:hover {
    background-color: var(--bg-tertiary-alpha);
    color: var(--accent-primary);
}
#student-list-container .expand-actions-button .icon {
    transition: transform 0.3s ease;
}
#student-list-container .list-item.expanded .expand-actions-button .icon {
    transform: rotate(180deg);
}
/* Área das ações ocultas */
#student-list-container .list-item-hidden-actions {
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    padding: 0 0.2rem;
    margin-top: 0;
    visibility: hidden;
    transition: max-height 0.3s ease-out, opacity 0.2s ease-out, padding 0.3s ease-out, margin-top 0.3s ease-out, visibility 0.3s, border-top-color 0.3s ease-out 0.1s;
    border-top: 1px dashed transparent; /* Começa transparente */
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    justify-content: space-around; /* Distribui botões */
}
/* Estado expandido das ações */
#student-list-container .list-item.expanded .list-item-hidden-actions {
    max-height: 100px; /* Altura suficiente para os botões */
    opacity: 1;
    padding: 0.6rem 0.2rem 0.3rem 0.2rem; /* Padding quando visível */
    margin-top: 0.6rem; /* Espaço acima */
    visibility: visible;
    border-top-color: var(--border-color); /* Torna a borda visível */
}
/* Estilo dos botões de ação individuais */
#student-list-container .list-item-hidden-actions .action-button {
    padding: 0.35rem;
    font-size: 0.95rem;
    line-height: 1;
    min-width: 36px; /* Largura mínima */
    flex-grow: 1; /* Permite crescer */
    max-width: 48px; /* Largura máxima */
    background-color: transparent;
    border: 1px solid transparent;
    color: var(--text-secondary);
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s, border-color 0.2s;
}
#student-list-container .list-item-hidden-actions .action-button:hover {
    background-color: var(--bg-tertiary-alpha);
    border-color: var(--border-color);
    color: var(--accent-primary);
}
/* Cores específicas no hover */
#student-list-container .list-item-hidden-actions .action-button.danger:hover { color: var(--accent-danger); }
#student-list-container .list-item-hidden-actions .action-button.warning:hover { color: var(--accent-warning); }
#student-list-container .list-item-hidden-actions .action-button.secondary:hover { color: var(--accent-secondary); }

/* --- NOVO: Estilos Representantes - Animação Neon Flow --- */
#student-list-container .list-item.representative::before,
#student-list-container .list-item.vice-representative::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    z-index: 0; /* Atrás do conteúdo */
    border-radius: 6px; /* Igual ao item */
    padding: 2px; /* Espessura da "borda" */
    background: conic-gradient(
        from var(--angle),
        transparent 0%,
        var(--gradient-color-1) 10%,
        var(--gradient-color-2) 90%,
        transparent 100%
    );
    /* Mascaramento para criar o efeito de borda */
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask-composite: exclude;
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: destination-out; /* Funciona melhor no Chrome */
    animation: rotate-border-glow 3s linear infinite;
    opacity: 0.8; /* Suaviza o brilho */
}
#student-list-container .list-item.representative::before { --gradient-color-1: var(--rep-gold-start); --gradient-color-2: var(--rep-gold-end); }
#student-list-container .list-item.vice-representative::before { --gradient-color-1: var(--vice-silver-start); --gradient-color-2: var(--vice-silver-end); }
/* --- FIM ESTILOS LISTA DE ALUNOS --- */


/* Tabela Presença (Estilos originais mantidos + Novos) */
.table-scroll-wrapper { width: 100%; overflow-x: auto; margin-top: 0.5rem; border: 1px solid var(--border-color); border-radius: 5px; background-color: var(--bg-primary); }
.data-table { width: 100%; border-collapse: collapse; font-size: 0.85rem; table-layout: fixed; }
.data-table th, .data-table td { border: 1px solid var(--border-color); padding: 0.5rem 0.4rem; text-align: left; vertical-align: middle; white-space: nowrap; }
.data-table th { background-color: var(--bg-tertiary); font-weight: 600; position: sticky; top: 0; z-index: 2; } /* Adicionado z-index */
/* Mantendo sticky first column */
.data-table th:first-child, .data-table td:first-child { position: sticky; left: 0; z-index: 1; background-color: var(--bg-sticky-alpha); border-right: 1px solid var(--border-color); white-space: normal; }
.data-table th:first-child { z-index: 3; } /* Garante que o header fique sobre as células */
/* Estilo Coluna Aluno */
#attendance-table-container .data-table .student-col { width: auto; min-width: 160px; white-space: normal; word-break: break-word; font-weight: 500; display: flex; align-items: center; gap: 5px; padding-left: 0.6rem; border-right: none; }
#attendance-table-container .data-table th.student-col { text-align: left; padding-left: 0.6rem;}
#attendance-table-container .data-table .student-col .student-number { color: var(--text-secondary); font-size: 0.8em; margin-right: 5px; min-width: 20px; text-align: right; font-weight: bold; }
#attendance-table-container .data-table .student-col .student-name { flex-grow: 1; }
/* Coluna Status */
#attendance-table-container .data-table .attendance-status { width: 100px; text-align: center; border-left: none;}
#attendance-table-container .data-table th.attendance-status { text-align: center; border-left: none;}
/* Botões de Presença */
.attendance-toggle { padding: 0.3rem 0.45rem; margin: 0 1px; font-size: 0.8rem; font-weight: 600; border: 2px solid transparent; cursor: pointer; transition: background-color 0.2s, border-color 0.2s, color 0.2s, transform 0.1s; display: inline-flex; align-items: center; justify-content: center; gap: 0.2em; line-height: 1; vertical-align: middle; min-width: 34px; }
.attendance-toggle .icon { margin-right: 0.2em; }
.attendance-toggle:active { transform: scale(0.95); }
.attendance-toggle.present.selected { background-color: var(--accent-success); border-color: var(--accent-success); color: #fff; transform: scale(1.05); opacity: 1; }
.attendance-toggle.absent.selected:not(.justified) { background-color: var(--accent-danger); border-color: var(--accent-danger); color: #fff; transform: scale(1.05); opacity: 1; }
.attendance-toggle.absent.justified.selected { background-color: var(--accent-warning); border-color: var(--accent-warning); color: var(--text-primary); transform: scale(1.05); opacity: 1; }
.attendance-toggle:disabled { opacity: 0.5 !important; cursor: not-allowed !important; background-color: transparent !important; border-color: transparent !important; transform: none !important; color: var(--text-secondary) !important; }
/* --- NOVOS Estilos para Aluno Suspenso --- */
.suspended-indicator {
    color: var(--accent-danger);
    font-weight: bold;
    margin-right: 5px;
    font-size: 0.8em;
    display: inline-block;
    user-select: none;
}
.data-table tr.suspended-student td {
    background-color: var(--suspended-bg) !important; /* Usa variável */
    color: var(--text-secondary); /* Cinza */
    font-style: italic;
}
.data-table tr.suspended-student.clickable-suspended {
    cursor: pointer; /* Indica que a linha é clicável */
}
.data-table tr.suspended-student.clickable-suspended:hover td {
    background-color: color-mix(in srgb, var(--suspended-bg) 70%, var(--bg-tertiary)) !important; /* Escurece no hover */
}
.data-table tr.suspended-student td.attendance-status {
    font-weight: bold;
    color: var(--accent-danger); /* Destaca status suspenso */
}
/* --- FIM Presença --- */


/* --- Modal de Observações e Itens (Atualizado) --- */
#student-observations-list {
    max-height: 35vh; /* Altura ajustada */
    overflow-y: auto;
    margin-bottom: 1rem;
    border-top: 1px solid var(--border-color);
    padding-top: 0.8rem;
}
.observation-item {
    background-color: var(--bg-primary); /* Fundo base */
    border: 1px solid var(--border-color);
    border-radius: 5px; /* Raio menor */
    padding: 0.7rem 0.8rem;
    margin-bottom: 0.6rem;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 10px;
    border-left-width: 5px; /* Espaço para a cor da categoria */
    transition: border-left-color 0.3s, background-color 0.3s;
    position: relative; /* Para pseudo-elementos se necessário */
}
.observation-item .observation-details { flex-grow: 1; }
.observation-item .observation-info {
    font-size: 0.7rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 0.25rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap; /* Quebra linha se necessário */
}
/* Estilo da Categoria */
.observation-item .observation-info .category {
    font-weight: bold;
    font-size: 0.75rem;
    margin-left: 0px; /* Ajustado */
    padding: 0.1rem 0.4rem;
    border-radius: 3px;
    /* Cores serão definidas pelas classes .category-* */
}
.observation-item .observation-info .observation-date {
    margin-left: auto; /* Empurra data para direita */
    padding-left: 5px; /* Espaço antes da data */
}
.observation-item .observation-text {
    font-size: 0.85rem;
    white-space: pre-wrap; /* Mantém quebras de linha */
    word-break: break-word;
    margin-top: 0.3rem;
    line-height: 1.5;
    color: var(--text-primary); /* Texto principal */
}
/* Datas de Suspensão */
.observation-item .observation-suspension-dates {
    font-size: 0.7rem;
    font-style: italic;
    color: var(--accent-danger);
    margin-top: 3px;
    display: block;
    font-weight: 500;
}
.observation-item .delete-observation-button {
    flex-shrink: 0;
    padding: 0.2rem; /* Padding menor */
    font-size: 0.9rem; /* Ícone pouco menor */
    /* Herda estilo .danger.icon-button */
}
/* Seção Adicionar Observação */
#add-observation-section { margin-top: 0.5rem; }
#add-observation-section textarea { min-height: 70px; }
/* Cor de Destaque */
.observation-item.highlighted-note {
    background-color: var(--highlight-bg);
    border-color: var(--accent-primary);
    border-left-width: 5px;
    box-shadow: 0 0 5px var(--highlight-bg);
}
/* Estilos por Categoria - Borda e Fundo do Span Category */
.observation-item.category-anotacao { border-left-color: var(--cat-anotacao-border); }
.observation-item.category-anotacao .category { background-color: var(--cat-anotacao-bg); color: var(--cat-anotacao-text); }
.observation-item.category-observacao { border-left-color: var(--cat-observacao-border); }
.observation-item.category-observacao .category { background-color: var(--cat-observacao-bg); color: var(--cat-observacao-text); }
.observation-item.category-ocorrencia { border-left-color: var(--cat-ocorrencia-border); }
.observation-item.category-ocorrencia .category { background-color: var(--cat-ocorrencia-bg); color: var(--cat-ocorrencia-text); }
.observation-item.category-advertencia { border-left-color: var(--cat-advertencia-border); }
.observation-item.category-advertencia .category { background-color: var(--cat-advertencia-bg); color: var(--cat-advertencia-text); }
.observation-item.category-suspensao { border-left-color: var(--cat-suspensao-border); }
.observation-item.category-suspensao .category { background-color: var(--cat-suspensao-bg); color: var(--cat-suspensao-text); }
/* --- FIM Observações --- */


/* Modal Genérico (Estilos originais mantidos + Ajuda) */
.modal { display: none; position: fixed; z-index: 1050; left: 0; top: 0; width: 100%; height: 100%; overflow: hidden; background-color: rgba(0,0,0,0.6); align-items: center; justify-content: center; animation: modalFadeIn 0.3s ease-out; }
@keyframes modalFadeIn { from { opacity: 0; } to { opacity: 1; } }
.modal.show { display: flex; }
.modal-content { background-color: var(--bg-modal-alpha); margin: 3% auto; padding: 15px; border: 1px solid var(--border-color); border-radius: 10px; width: 90%; max-width: 600px; /* Mantido */ max-height: 90vh; display: flex; flex-direction: column; box-shadow: 0 8px 25px var(--shadow-color); animation: modalSlideIn 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94); transition: background-color 0.4s ease; }
@keyframes modalSlideIn { from { transform: translateY(-25px) scale(0.98); opacity: 0; } to { transform: translateY(0) scale(1); opacity: 1; } }
.modal-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; margin-bottom: 15px; flex-shrink: 0; }
.modal-header h2 { margin: 0; font-size: 1.2rem; }
.close-button { background: none; border: none; font-size: 1.8rem; color: var(--text-secondary); cursor: pointer; padding: 0 0.5rem; line-height: 1; }
.close-button:hover { color: var(--text-primary); }
.modal-body { overflow-y: auto; flex-grow: 1; padding-right: 5px; line-height: 1.6; }
/* Estilos específicos para o corpo do modal de Ajuda */
.modal.help-modal .modal-body h3 { color: var(--accent-primary); margin-top: 1rem; margin-bottom: 0.5rem; font-size: 1.1rem; display: flex; align-items: center; gap: 0.5em;}
.modal.help-modal .modal-body p { margin-bottom: 0.8rem; color: var(--text-secondary); }
.modal.help-modal .modal-body ul { list-style: none; /* Remove bolinhas padrão */ margin-left: 5px; /* Leve indentação */ margin-bottom: 1rem; padding-left: 0; }
.modal.help-modal .modal-body li { margin-bottom: 0.4rem; padding-left: 1.2em; /* Espaço para ícone */ position: relative; }
.modal.help-modal .modal-body li::before { content: '▸'; /* Usa seta */ position: absolute; left: 0; color: var(--accent-primary); font-weight: bold; }
.modal.help-modal .modal-body code { background-color: var(--bg-tertiary-alpha); padding: 0.1em 0.4em; border-radius: 3px; font-family: monospace; }
.modal.help-modal .modal-body button:not(.icon-button) { display: inline-flex; padding: 0.1rem 0.4rem; font-size: 0.8rem; vertical-align: middle; margin: 0 2px; pointer-events: none; /* Não clicável na ajuda */ }
.modal.help-modal .modal-body .icon { vertical-align: middle; }
/* Fim Estilos Modal Ajuda */
.modal-footer { border-top: 1px solid var(--border-color); padding-top: 10px; margin-top: 15px; text-align: right; flex-shrink: 0; display: flex; justify-content: flex-end; align-items: center; gap: 5px; }
.modal-footer button { margin-left: 0; }

/* Estilos Formulários (modal observações) */
.form-group { margin-bottom: 1rem; } label { display: block; margin-bottom: 0.4rem; font-weight: 500; color: var(--text-secondary); font-size: 0.9rem; } input[type="text"], input[type="number"], input[type="date"], select, textarea { width: 100%; padding: 0.75rem; margin-bottom: 0; border: 1px solid var(--input-border); border-radius: 5px; background-color: var(--input-bg); color: var(--text-primary); font-size: 0.95rem; transition: border-color 0.2s, box-shadow 0.2s; }
input:focus, select:focus, textarea:focus { outline: none; border-color: var(--accent-primary); box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-primary) 20%, transparent); }
.form-group > *:not(:last-child) { margin-bottom: 0.5rem; } textarea { min-height: 80px; resize: vertical; }

/* Botões (Estilos base) */
button, .button-like { padding: 0.6rem 1.2rem; border: none; border-radius: 5px; cursor: pointer; font-size: 0.9rem; font-weight: 500; background-color: var(--accent-primary); color: #fff; margin: 0.25rem; display: inline-flex; align-items: center; justify-content: center; transition: background-color 0.2s, opacity 0.2s, transform 0.1s; text-decoration: none; line-height: 1.4; user-select: none; }
button:hover, .button-like:hover { opacity: 0.85; }
button:active, .button-like:active { transform: scale(0.97); }
button:disabled, .button-like:disabled { opacity: 0.6; cursor: not-allowed; background-color: var(--accent-secondary); }
button.secondary { background-color: var(--accent-secondary); } button.danger { background-color: var(--accent-danger); } button.success { background-color: var(--accent-success); } button.warning { background-color: var(--accent-warning); color: var(--text-primary); }
button.icon-button { padding: 0.4rem; font-size: 1.1rem; line-height: 1; background-color: transparent; color: var(--text-secondary); border: 1px solid var(--border-color); border-radius: 5px; margin: 0 2px; }
button.icon-button:hover { color: var(--accent-primary); background-color: var(--bg-tertiary-alpha); border-color: var(--accent-primary); }

/* Ícones (Originais + Novos) */
.icon { display: inline-block; font-style: normal; font-variant: normal; text-rendering: auto; -webkit-font-smoothing: antialiased; margin-right: 0.4em; /* Espaçamento padrão */ line-height: 1; flex-shrink: 0; }
.icon-only { margin-right: 0 !important; }
.icon-horario::before { content: "🕒"; } .icon-escola::before { content: "🏫"; } .icon-turmas::before { content: "📚"; } .icon-alunos::before { content: "🧑‍🎓"; font-size: 1.1em; } .icon-notas::before { content: "📊"; } .icon-config::before { content: "⚙️"; } .icon-contato::before { content: "✉️"; } .icon-editar::before { content: "✏️"; } .icon-excluir::before { content: "🗑️"; } .icon-anotacao::before { content: "📝"; } .icon-salvar::before { content: "💾"; } .icon-voltar::before { content: "⬅️"; } .icon-presenca::before { content: "✔️"; } .icon-falta::before { content: "❌"; } .icon-justificar::before { content: "💬"; } .icon-adicionar::before { content: "➕"; } .icon-estrutura::before { content: "🧱"; } .icon-calendario::before { content: "📅"; } .icon-plano::before { content: "🗒️"; } .icon-copiar::before { content: "📋"; } .icon-pdf::before { content: "📄"; }
.icon-mover::before { content: "🔁"; } /* Mantido */
.icon-todos-presentes::before { content: "👥✔️"; } /* Mantido */
.icon-notificacao-on::before { content: "🔔"; } /* Mantido */
.icon-notificacao-off::before { content: "🔕"; } /* Mantido */
.icon-nao-letivo::before { content: "🏖️"; } /* Mantido */
.icon-mapa::before { content: "🗺️"; } /* Mantido */
.icon-chevron-down::before { content: "▼"; font-size: 0.8em; }
.icon-chevron-up::before { content: "▲"; font-size: 0.8em; }
.icon-som::before { content: "🔊"; } /* Mantido */
.icon-arquivo::before { content: "📁"; } /* Mantido */
/* Tool Icons (Mantido) */
.icon-ferramentas::before { content: "🔧"; } .icon-sorteio::before { content: "🎲"; } .icon-cronometro::before { content: "⏱️"; } .icon-grupos::before { content: "👨‍👩‍👧‍👦"; } .icon-calculadora-avancada::before { content: "🧮"; }
/* --- NOVOS ÍCONES do Polimento --- */
.icon-representante::before { content: "👑"; }
.icon-vice::before { content: "🥈"; }
.icon-transferir::before { content: "🔁"; } /* Pode reutilizar .icon-mover */
.icon-ajuda::before { content: "❓"; }
.icon-suspensao::before { content: "🚫"; } /* Adicionado para exemplo na ajuda */


/* Utilitários (Mantidos) */
.hidden { display: none !important; } .text-center { text-align: center; } .text-right { text-align: right; } .mt-1 { margin-top: 0.5rem !important; } .mt-2 { margin-top: 1rem !important; } .mb-0 { margin-bottom: 0 !important; } .mb-1 { margin-bottom: 0.5rem !important; } .mb-2 { margin-bottom: 1rem !important; } .mr-1 { margin-right: 0.5rem !important; } .ml-1 { margin-left: 0.5rem !important; } .d-flex { display: flex !important; } .justify-between { justify-content: space-between !important; } .align-center { align-items: center !important; } .w-100 { width: 100% !important; }
.list-item.active { background-color: var(--bg-tertiary-alpha); border-left-color: var(--accent-primary); /* Adapta se necessário */ }

/* Demais estilos originais (Schedule, Grade Structure, Notas/Médias Headers, Class Notes, Lesson Plan, Footer, Contato, PIX, Notificações, Settings, Mapa, Ferramentas, etc.) são mantidos abaixo... */
/* ... (Cole aqui o restante dos estilos do seu CSS original que NÃO foram substituídos ou modificados acima) ... */

/* Schedule List specific styles */
.schedule-day-group { margin-bottom: 1.5rem; }
.schedule-day-title { font-size: 1.2rem; font-weight: 600; color: var(--accent-primary); margin-bottom: 0.5rem; padding-bottom: 0.3rem; border-bottom: 2px solid var(--accent-primary); text-align: left; justify-content: flex-start; gap: 0; }
.schedule-item { display: flex; align-items: center; padding: 0.6rem 0.8rem; background-color: var(--bg-secondary-alpha); border: 1px solid var(--border-color); border-radius: 5px; margin-bottom: 0.5rem; }
.schedule-time { font-weight: 600; width: 100px; flex-shrink: 0; }
.schedule-info { flex-grow: 1; margin: 0 0.8rem; }
.schedule-info .school-name { font-weight: 500; }
.schedule-info .note { font-size: 0.8rem; color: var(--text-secondary); }
.schedule-actions { flex-shrink: 0; display: flex; align-items: center; gap: 4px;}
.schedule-actions button { padding: 0.2rem 0.4rem; font-size: 0.8rem; }
.notification-toggle-button { padding: 0.2rem 0.3rem !important; font-size: 1rem !important; background: transparent !important; border: none !important; cursor: pointer; }
.notification-toggle-button:hover { opacity: 0.7; }

/* --- Grade Structure Modal Styles --- */
.grade-structure-modal .card { padding: 0.8rem; margin-bottom: 0.8rem; }
.grade-structure-modal .card-header { padding-bottom: 0.4rem; margin-bottom: 0.4rem; align-items: flex-start; gap: 8px; }
.grade-structure-modal .gs-name { font-size: 1.05rem; margin-bottom: 0 !important; flex-grow: 1; padding: 0.5rem; }
.grade-structure-modal .delete-gs-button { margin-left: auto; flex-shrink: 0; }
.grade-structure-modal .gs-section { border-top: 1px solid var(--border-color); margin-top: 0.8rem; padding-top: 0.8rem; }
.grade-structure-modal .gs-section h4 { font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 0.6rem; font-weight: 500; }
.grade-structure-modal .gs-instruments-container { padding-top: 0rem; }
.grade-label-item { display: flex; align-items: center; margin-bottom: 0.5rem; gap: 5px; }
.grade-label-item input { flex-grow: 1; margin-right: 0; margin-bottom: 0; font-size: 0.95rem; padding: 0.5rem; }
.grade-label-item button { flex-shrink: 0; }
.grade-structure-modal .add-gs-label-button { font-size: 0.85rem !important; padding: 0.3rem 0.8rem !important; margin-top: 0.5rem !important; }
#add-grade-set-button { width: 100%; margin-top: 0.5rem; }
/* Color Range Styles */
.color-range-item { display: flex; align-items: center; gap: 8px; margin-bottom: 0.6rem; border: 1px dashed var(--border-color); padding: 0.5rem; border-radius: 4px; flex-wrap: wrap; }
.color-range-item label { margin-bottom: 0; font-size: 0.85rem; flex-shrink: 0;}
.color-range-item input[type="number"] { width: 65px; padding: 0.4rem; margin-bottom: 0; font-size: 0.9rem; text-align: center;}
.color-range-item input[type="color"] { width: 40px; height: 30px; padding: 2px; margin-bottom: 0;}
.color-range-item button { flex-shrink: 0; margin-left: auto; }
.grade-structure-modal .add-color-range-button { font-size: 0.85rem !important; padding: 0.3rem 0.8rem !important; margin-top: 0.3rem !important; display: block; margin-left: auto; margin-right: auto; }

/* --- Notas e Médias Header Adjustment --- */
 #class-details-section > .card:nth-of-type(4) .card-header .options { display: flex; align-items: center; flex-wrap: wrap; gap: 5px; margin-left: auto; } /* Assume Notas é o 4º card */
 #class-details-section > .card:nth-of-type(4) .card-header .options label { margin-bottom: 0; font-size: 0.85rem; white-space: nowrap; margin-right: 2px; }
 #class-details-section > .card:nth-of-type(4) .card-header .options select { padding: 0.3rem 0.4rem; font-size: 0.85rem; margin-bottom: 0; flex-shrink: 0; margin-right: 5px; }
 #class-details-section > .card:nth-of-type(4) .card-header .options button.icon-button { margin-left: 0; margin-right: 5px; }
 #class-details-section > .card:nth-of-type(4) .card-header .options .export-buttons { display: flex; gap: 5px; margin-left: 0; }

/* --- Class Notes Area Adjustment --- */
 #class-notes-edit textarea { min-height: 120px; margin-bottom: 0.5rem;}
 #class-notes-edit .text-right { margin-bottom: 0.5rem; margin-top: 0; }
/* --- Lesson Plan Area --- */
#lesson-plan-textarea { min-height: 100px; margin-bottom: 0.5rem; }

.footer-message { text-align: center; font-size: 0.85rem; color: var(--text-secondary); margin-top: 2rem; margin-bottom: 1rem; padding: 0 1rem; }
#contact-section .card p { margin-bottom: 1rem; }
#contact-section .card a { font-weight: 500; word-break: break-all; }
#contact-section .card h4 { font-weight: 600; margin-top: 1.5rem; margin-bottom: 0.5rem; }

/* Estilos para Chave PIX e Botão Copiar */
.pix-key-container { background-color: var(--bg-tertiary-alpha); padding: 0.8rem; border-radius: 5px; font-family: monospace, 'Courier New', Courier; word-break: break-all; margin-top: 0.5rem; margin-bottom: 1rem; border: 1px dashed var(--border-color); user-select: all; cursor: text; }
#copy-pix-button { width: 100%; max-width: 300px; margin: 0 auto; display: flex; gap: 0.5em; background-color: var(--accent-success); transition: background-color 0.3s ease; }
#copy-pix-button.error { background-color: var(--accent-danger); }

/* --- Notification Banner Styles --- */
#notification-banner { position: fixed; top: 0; left: 0; width: 100%; background-color: var(--bg-notification); color: var(--text-notification); padding: 10px 15px; z-index: 2000; box-shadow: 0 2px 5px rgba(0,0,0,0.2); display: flex; justify-content: space-between; align-items: center; transform: translateY(-120%); transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); font-size: 0.9rem; line-height: 1.3; }
#notification-banner.show { transform: translateY(0); }
#notification-message { flex-grow: 1; margin-right: 10px; }
#notification-close-button { background: none; border: none; color: inherit; opacity: 0.8; font-size: 1.6rem; font-weight: bold; cursor: pointer; padding: 0 5px; line-height: 1; }
#notification-close-button:hover { opacity: 1; }

/* --- Settings: Custom Notification Sound Styles --- */
.custom-sound-container { margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-color); }
.custom-sound-input-group { display: flex; align-items: center; gap: 10px; margin-bottom: 0.5rem; flex-wrap: wrap; }
#custom-sound-filename { font-size: 0.85rem; color: var(--text-secondary); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex-grow: 1; background: var(--bg-tertiary-alpha); padding: 0.4rem 0.6rem; border-radius: 4px; border: 1px solid var(--border-color); min-width: 100px; }
#current-custom-sound-display { border: 1px dashed var(--border-color); background-color: var(--bg-tertiary-alpha); padding: 0.5rem; border-radius: 4px; margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-secondary); display: flex; align-items: center; justify-content: space-between; }
#current-custom-sound-name { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: calc(100% - 40px); }
#remove-custom-sound-button { padding: 0.3rem 0.5rem; font-size: 0.8rem; flex-shrink: 0; }

/* --- Classroom Map Styles (Mantido) --- */
.classroom-container { display: grid; grid-template-rows: auto 1fr auto; grid-template-columns: auto 1fr auto; gap: 10px; padding: 15px; border: 1px solid var(--border-color); border-radius: 5px; margin-top: 1rem; overflow: auto; align-items: center; justify-items: center; min-height: 200px; }
.classroom-map-grid { grid-area: 2 / 2 / 3 / 3; display: grid; gap: var(--seat-gap); justify-content: center; padding: 5px; width: fit-content; max-width: 100%; }
.seat { width: var(--seat-width); height: var(--seat-height); border: 2px solid var(--map-seat-border); background-color: var(--map-seat-bg); border-radius: 5px; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; font-size: 0.7rem; color: var(--map-seat-text); overflow: hidden; cursor: default; position: relative; transition: background-color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease; }
.seat.occupied { background-color: var(--map-seat-occupied-bg); color: var(--map-seat-occupied-text); font-weight: 500; border-style: solid; }
.map-edit-area .seat.occupied { cursor: pointer; }
.map-edit-area .seat.empty { cursor: pointer; }
.map-edit-area .seat.occupied[draggable="true"] { cursor: grab; }
.map-edit-area .seat.occupied[draggable="true"]:active { cursor: grabbing; }
.seat.occupied .seat-student-number { font-size: 0.65rem; opacity: 0.8; display: block; line-height: 1; margin-bottom: 2px; pointer-events: none; }
.seat.occupied .seat-student-name { display: block; line-height: 1.1; max-height: 2.2em; overflow: hidden; padding: 0 2px; pointer-events: none; }
.seat.empty::before { display: none; }
.seat.empty .seat-placeholder-text { font-size: 0.65rem; line-height: 1.1; padding: 2px; display: block; opacity: 0.6; color: var(--map-seat-text); }
.seat span.seat-placeholder-text { display: none; }
.teacher-desk { border: var(--teacher-desk-border-width) solid var(--map-teacher-desk-border); background-color: var(--map-teacher-desk-bg); border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; color: var(--text-primary); z-index: 5; transition: transform 0.3s, width 0.3s, height 0.3s, grid-area 0s; width: var(--teacher-desk-width); height: var(--teacher-desk-height); transform-origin: center center; margin: 0; }
.teacher-desk.position-top-center    { grid-area: 1 / 2 / 2 / 3; }
.teacher-desk.position-bottom-center { grid-area: 3 / 2 / 4 / 3; }
.teacher-desk.position-left-center   { grid-area: 2 / 1 / 3 / 2; transform: rotate(-90deg); }
.teacher-desk.position-right-center  { grid-area: 2 / 3 / 3 / 4; transform: rotate(90deg); }
/* ... outras posições teacher-desk ... */
.classroom-map-edit-controls { display: flex; flex-wrap: wrap; gap: 15px; align-items: center; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border-color); }
.classroom-map-edit-controls .form-group { margin-bottom: 0; display: flex; align-items: center; gap: 5px;}
.classroom-map-edit-controls label { margin-bottom: 0; flex-shrink: 0; }
.classroom-map-edit-controls input[type="number"], .classroom-map-edit-controls select { width: auto; max-width: 80px; margin-bottom: 0; padding: 0.4rem; font-size: 0.9rem; }
.classroom-map-edit-controls select { max-width: 140px; }
.map-edit-area { display: flex; gap: 20px; margin-top: 1rem; flex-wrap: wrap; }
.unassigned-students-list { border: 1px dashed var(--map-seat-border); padding: 10px; border-radius: 5px; min-height: 100px; max-height: 40vh; overflow-y: auto; background-color: var(--bg-tertiary-alpha); flex: 1; min-width: 180px; }
.unassigned-students-list h5 { margin-bottom: 0.5rem; font-size: 0.9rem; text-align: center; color: var(--text-secondary); }
 .draggable-student { background-color: var(--map-seat-occupied-bg); color: var(--map-seat-occupied-text); padding: 5px 8px; border: 1px solid var(--map-seat-border); border-radius: 4px; margin-bottom: 5px; font-size: 0.8rem; cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; user-select: none; }
 .draggable-student[draggable="true"]:active { cursor: grabbing; }
 .draggable-student .student-number { font-weight: bold; margin-right: 4px; pointer-events: none; }
 .draggable-student .student-name { pointer-events: none; }
 .seat.drag-over { border-color: var(--accent-success); background-color: var(--map-drag-over-bg); box-shadow: 0 0 8px var(--map-drag-over-bg); }
 .unassigned-students-list.drag-over { border-color: var(--accent-danger); background-color: color-mix(in srgb, var(--accent-danger) 15%, transparent); }
 .seat.occupied.dragging, .draggable-student.dragging { opacity: 0.4; }
 .seat.selected-for-assignment { border-color: var(--map-seat-selected-border); box-shadow: 0 0 0 3px color-mix(in srgb, var(--map-seat-selected-border) 40%, transparent); }

/* --- Tools Grid (Mantido) --- */
.tools-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(var(--tool-card-min-width), 1fr)); gap: 1rem; padding: 0.5rem 0; }
.tool-card { background-color: var(--bg-secondary-alpha); border: 1px solid var(--border-color); border-radius: 8px; padding: 1.2rem 0.8rem; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease; box-shadow: 0 2px 4px var(--shadow-color); min-height: 100px; }
.tool-card:hover { transform: translateY(-3px); box-shadow: 0 6px 12px color-mix(in srgb, var(--shadow-color) 120%, black); }
.tool-card:active { transform: scale(0.97); background-color: var(--bg-tertiary-alpha); }
.tool-card .icon { font-size: 2rem; margin-bottom: 0.6rem; color: var(--accent-primary); }
.tool-card-title { font-size: 0.9rem; font-weight: 500; color: var(--text-primary); line-height: 1.3; }

/* --- GRADES TABLE (Mantido) --- */
#grades-table-container .data-table .grade-col { width: 55px; text-align: center; }
#grades-table-container .data-table .sum-col { width: 60px; text-align: center; }
#grades-table-container .data-table .avg-col { width: 60px; text-align: center; font-weight: bold; transition: background-color 0.3s ease, color 0.3s ease; }
#grades-table-container .data-table .student-col { width: 120px; min-width: 100px; white-space: normal; word-break: break-word; border-right: 2px solid var(--border-color); }
.data-table td.average.grade-low { background-color: var(--grade-low-bg); color: var(--grade-low-text); }
.data-table td.average.grade-medium { background-color: var(--grade-medium-bg); color: var(--grade-medium-text); }
.data-table td.average.grade-high { background-color: var(--grade-high-bg); color: var(--grade-high-text); }

/* --- Monthly Attendance (Mantido) --- */
#monthly-attendance-controls { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 10px; margin-bottom: 0.5rem; }
#monthly-attendance-controls .date-selectors { display: flex; align-items: center; gap: 5px; flex-wrap: wrap; }
#monthly-attendance-controls label { margin-bottom: 0; }
#monthly-attendance-controls select { width: auto; padding: 0.4rem; font-size: 0.9rem; margin-bottom: 0; }
#monthly-attendance-controls .export-buttons { display: flex; gap: 5px; }
#monthly-attendance-table-wrapper { max-height: 60vh; overflow: auto; margin-top: 10px; }
.monthly-attendance-table { width: 100%; min-width: 800px; border-collapse: collapse; font-size: 0.75rem; }
.monthly-attendance-table th, .monthly-attendance-table td { border: 1px solid var(--border-color); padding: 0.3rem; text-align: center; min-width: 32px; white-space: nowrap; }
.monthly-attendance-table th { background-color: var(--bg-tertiary); font-weight: 600; }
.monthly-attendance-table th.student-col-monthly, .monthly-attendance-table td.student-col-monthly { min-width: 150px; text-align: left; position: sticky; left: 0; background-color: var(--bg-sticky-alpha); z-index: 1; white-space: normal; border-right: 2px solid var(--border-color); }
.monthly-attendance-table th.student-col-monthly { z-index: 3; }
.monthly-attendance-table th.freq-col-monthly, .monthly-attendance-table td.freq-col-monthly { min-width: 50px; font-weight: bold; position: sticky; right: 0; background-color: var(--bg-sticky-alpha); z-index: 1; border-left: 2px solid var(--border-color); }
 .monthly-attendance-table th.freq-col-monthly { z-index: 3; }
.monthly-attendance-table td.weekend { background-color: var(--bg-tertiary-alpha); opacity: 0.7; cursor: not-allowed; }
.monthly-attendance-table td.status-H { background-color: var(--attendance-holiday-bg); color: var(--attendance-holiday-text); font-style: italic; font-weight: bold; }
#monthly-attendance-summary { margin-top: 1rem; text-align: center; font-weight: bold; }
#monthly-attendance-chart-container { margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--border-color); display: flex; flex-wrap: wrap; gap: 5px; align-items: flex-end; min-height: 100px; overflow-x: auto; padding-bottom: 10px; }
.chart-bar-container { display: flex; flex-direction: column; align-items: center; flex: 0 0 auto; min-width: 40px; text-align: center; }
.chart-bar { width: 25px; background-color: var(--accent-primary); border-radius: 3px 3px 0 0; transition: height 0.3s ease-out; position: relative; }
 .chart-bar::after { content: attr(data-percentage); position: absolute; top: -1.5em; left: 50%; transform: translateX(-50%); background-color: rgba(0,0,0,0.7); color: white; padding: 2px 5px; border-radius: 3px; font-size: 0.7rem; white-space: nowrap; opacity: 0; transition: opacity 0.2s; pointer-events: none; }
 .chart-bar:hover::after { opacity: 1; }
.chart-label { font-size: 0.7rem; margin-top: 3px; color: var(--text-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 50px; }